{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-body">
                    <div class="text-center mb-4">
                        <h2>Payment Receipt</h2>
                        
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5>Customer Details</h5>
                            <p><strong>Name:</strong> {{ booking.user.username }}</p>
                            <p><strong>Email:</strong> {{ booking.user.email }}</p>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <h5>Payment Details</h5>
                            <p><strong>Amount Paid:</strong> ₹{{ payment.amount }}</p>
                            <p class="text-muted">Transaction ID: {{ payment.id }}</p>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th class="text-end">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Package Cost ({{ booking.tour_package.name }})</td>
                                    <td class="text-end">₹{{ booking.tour_package.price }}</td>
                                </tr>
                                <tr>
                                    <td>Flight Cost ({{ booking.flight.airline }} - {{ booking.flight.flight_number }})</td>
                                    <td class="text-end">₹{{ booking.flight.price }}</td>
                                </tr>
                                <tr>
                                    <td>Subtotal</td>
                                    <td class="text-end">₹{{ tax_breakdown.subtotal }}</td>
                                </tr>
                                <tr>
                                    <td>GST (18%)</td>
                                    <td class="text-end">₹{{ tax_breakdown.total_taxes }}</td>
                                </tr>
                                <tr class="table-active fw-bold">
                                    <td>Total Amount</td>
                                    <td class="text-end">₹{{ payment.amount }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="text-center">
                        <p class="text-muted">Thank you for choosing TravelXpert!</p>
                        <a href="{% url 'download_receipt' booking.id %}" class="btn btn-primary">
                            <i class="fas fa-download me-2"></i>Download PDF
                        </a>
                    </div>
                </div> 
            </div>
        </div>
    </div>
</div>
{% endblock %}
